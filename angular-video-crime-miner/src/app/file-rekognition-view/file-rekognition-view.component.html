<!-- Basic Page info/headers -->
<!-- Video Player and Label Selector Box -->
<div class="page-content">
    <!-- Basic Page info/headers -->
    <h1>Video Analysis Output</h1>
    <div class="actionsAndInfo">
        <div class="quickInfo">
            <p><b>Case ID:</b> {{this.getCaseId()}}</p>
            <p><b>Tags:</b> {{this.getKeywords()}}</p>
            <p *ngIf="this.getLabels()">Found <b>{{this.getLabelTotal()}}</b> Labels Over <b>{{this.getLabels().length}}</b> Timestamps</p>
            <!--  <p><b>Case Name:</b></p>  -->
            <p class = "label-count" *ngIf="this.getLabels()">Found <b>{{this.getLabelTotal()}}</b> Labels Over <b>{{this.getLabels().length}}</b> Timestamps</p>
        </div>
        <div class="sortButtons">
            <div class="cm-standard-button" (click)="this.setSortMethod(this.labelSortTypes[0])" > Sort By File </div>
            <div class="cm-standard-button" (click)="this.setSortMethod(this.labelSortTypes[1])" > Sort By Keyword </div>
        </div>
    </div>
    <div class="labelVisualizer">
        <div class="videoplayer">
            <vg-player (onPlayerReady)="loadVideoIntoPlayer($event)" id="video-container">
                <video #media #master [vgMedia]="$any(media)" [src]="currentVideo.src" id="singleVideo" preload="auto"> </video>
            </vg-player>
            <div class="init-overlay-text" id="overlay">Click on a label to the right to see it in the video</div>
        </div>
        <!-- Scrollbox -->
        <div class="cm-table scrollbox">
            <div class="scrollbox">
                <div class="cm-table-header">
                    <div class="nameCol"><b>Label</b></div>
                    <div class="timeCol"><b>Time</b></div>
                    <div class="confidenceCol"><b>Confidence</b></div>
                </div>
                <!-- Sorted by file view -->
                <div *ngIf="this.getSortMethod() === this.labelSortTypes[0]">
                    <div *ngFor="let fileSegment of this.getLabelsByFile()">
                        <div class="clickableLabel" [class.selected]="fileSegment === currentFile" (click)="setCurrentFile(fileSegment.file_id)"> {{fileSegment.file_id}} </div>
                        
                        <div *ngFor="let label of fileSegment.labels.Labels" >
                            <div class="clickableLabel" *ngIf="this.checkAgainstCurrentFile(fileSegment.file_id)" (click)="this.selectLabelDetection(label,fileSegment.file_id,label.Timestamp,label.Label.Instances)"> {{label.Label.Name}}, {{this.prettifyTimestamp(label.Timestamp)}}, {{this.prettifyConfidence(label.Label.Confidence)}} </div>
                        </div>
                        
                    </div>
                </div>

                <!-- Sorted by keyword view -->
                
                <div *ngIf="this.getSortMethod() === this.labelSortTypes[1]">
                    <div *ngFor="let keyword of this.getKeywords()">
                        <div class="clickableLabel" [class.selected]="keyword === currentKeyword" (click)="setCurrentKeyword(keyword)"> {{keyword}} </div>
                        
                        <div *ngFor="let label of this.scanLabelsForKeyword(keyword)" >
                            <div class="clickableLabel" [class.selected]="label === this.selectedLabel" *ngIf="this.checkAgainstCurrentKeyword(keyword)" (click)="this.selectLabelDetection(label.label,label.file_id,label.label.Timestamp,label.label.Label.Instances)"> {{label.file_id}}, {{this.prettifyTimestamp(label.label.Timestamp)}}, {{this.prettifyConfidence(label.label.Label.Confidence)}} </div>
                        </div>
                        
                    </div>
                </div>
                
                <!--<div *ngFor="let label of this.getLabels()">
                    <div class = "clickableLabel" [class.selected]="label === selectedLabel" 
                    (click)="onSelectLabel(label)" (dblclick)="onDoubleClickLabel(label)">
                        <div class="nameCol">{{label.Name}}</div>
                        <div class="timeCol">{{prettifyTimestamp(label.Timestamp)}}</div>
                        <div class="confidenceCol">{{prettifyConfidence(label.Confidence)}}</div>
                    </div>
                </div> -->


            </div>
        </div>
    </div>
</div>